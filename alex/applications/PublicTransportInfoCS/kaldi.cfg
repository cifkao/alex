
#!/usr/bin/env python
# vim: set fileencoding=UTF-8 filetype=python :
#
#  When the configuration file is loaded, several automatic transformations
#  are applied:
#
# 1) '{cfg_abs_path}' as a substring of atomic attributes is replaced by
#    an absolute path of the configuration files.  This can be used to
#    make the configuration file independent of the location of programs
#    using the configuration file.
#
# or better user use the as_project_path function
import os

from alex.utils.config import as_project_path, online_update
from alex.utils.mproc import SystemLogger
from alex.utils.sessionlogger import SessionLogger

config = {
    'ASR': {
        'debug': True,
        'type': 'Kaldi',
        'Kaldi': {
            'debug': False,
            'verbose': 0,
            'max_dec_frames': 10,
            'n_best': 100,
            'config': online_update('applications/PublicTransportInfoCS/hclg/models/mfcc.conf'),
            'model': online_update('applications/PublicTransportInfoCS/hclg/models/tri2b_bmmi.mdl'),
            'matrix': online_update('applications/PublicTransportInfoCS/hclg/models/tri2b_bmmi.mat'),
            'wst': online_update('applications/PublicTransportInfoCS/hclg/models/words.txt'),
            'hclg': online_update('applications/PublicTransportInfoCS/hclg/models/HCLG_tri2b_bmmi.fst'),
            'silent_phones': online_update('applications/PublicTransportInfoCS/hclg/models/silence.csl'),
            'calibration_table':  [(0.9927755014982476, 2.0, 0.86333175538351226), (0.0061840519052987096, 0.01192237424918771, 0.045666103416500584), (-2.0, 0.0061840519052987096, 0.032245436393400301), (0.01192237424918771, 0.019651634662948978, 0.067440076879532115), (0.029854156064506174, 0.046318784413886475, 0.10952099892838583), (0.019651634662948978, 0.029854156064506174, 0.088446386901208249), (0.046318784413886475, 0.0647326723001569, 0.13531532408265606), (0.0647326723001569, 0.09178834949070577, 0.15838578668554462), (0.23846150707620373, 0.3005916663814219, 0.28030565952676012), (0.09178834949070577, 0.1165299238882098, 0.18523179617528279), (0.3732900734978548, 0.4583208115043973, 0.34434764511210897), (0.3005916663814219, 0.3732900734978548, 0.31071028336854761), (0.14799810053274748, 0.18782507692509195, 0.2279817475193979), (0.1165299238882098, 0.14799810053274748, 0.20552779696277082), (0.18782507692509195, 0.23846150707620373, 0.25282308946052889), (0.9819619705959981, 0.9887463048315849, 0.77981712869618869), (0.9887463048315849, 0.9927755014982476, 0.82051984832832947), (0.9584131045225188, 0.9722043766577394, 0.70432872300392524), (0.939448314808381, 0.9584131045225188, 0.66935031880317808), (0.9142907234091052, 0.939448314808381, 0.6360951737444076), (0.8819802893229771, 0.9142907234091052, 0.60447838909829055), (0.8442608809882038, 0.8819802893229771, 0.57441924878805095), (0.8002482470030955, 0.8442608809882038, 0.54584101332533685), (0.7516253116871929, 0.8002482470030955, 0.5186707238981263), (0.7010488345005152, 0.7516253116871929, 0.492839016110515), (0.6514346477044207, 0.7010488345005152, 0.46827994289886626), (0.6000999949416229, 0.6514346477044207, 0.44493080617224318), (0.5507268263189462, 0.6000999949416229, 0.42273199674730294), (0.5035024185770494, 0.5507268263189462, 0.40162684216902128), (0.4583208115043973, 0.5035024185770494, 0.38156146202873648), (0.9722043766577394, 0.9819619705959981, 0.74111968447074916)],
            'extra_args': '  --max-mem=10000000000 --acoustic-scale=0.1 --beam=12.0 --lattice-beam=5.0 --max-active=2000 --left-context=3 --right-context=3',  # pg CLASS LM weight 0.8
        },
    },
}
